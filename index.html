<html>
    <head>
        <meta charset="utf8"/>
        <title>Go Api Sample</title>
        <script src="wasm_exec.js"></script>
        <script>
            const go = new Go();
                WebAssembly.instantiateStreaming(fetch("alphaVantageApi.wasm"), go.importObject)
                    .then(result => {
                    go.run(result.instance);
                });
        </script>
    </head>
    <body style="text-align-last: center">
        <div>
            <input type="submit"
                   value="Get stock (demo gets price details for AAPL"
                   onclick="getDailyPrice()"/>
        </div>
        <script>
            async function getDailyPrice() {
                try {
                    const response = await getDailyPricesGoApi("API_KEY_HERE", "AAPL")
                    const message = await response.json()

                    // Logs Go api output to console
                    console.log(message)
                } catch (err) {
                    console.error('Caught exception', err)
                }
            }
        </script>
    </body>
</html>